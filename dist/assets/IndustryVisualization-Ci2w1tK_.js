import{B as q,P as J,L as Q}from"./PieChart-BeRY37Tt.js";import{a as U}from"./index-t--hEgTQ.js";import{_ as K,q as P,h as X,g as f,i as Z,c as T,a as l,d as o,w as i,r as m,k as B,y as ee,m as W,E as Y,o as y,F as te,f as ae,b as x,t as _,z as se}from"./index-BC4_fVfx.js";const oe={class:"industry-visualization"},ne={class:"page-header"},re={class:"filter-container"},le={class:"market-size-card"},ie={class:"card-header"},ce={class:"card-body"},de={class:"market-size-value"},ue={class:"market-size-description"},pe={class:"chart-card"},me={class:"chart-card"},he={class:"data-table-container mt-20"},fe={class:"data-table-container mt-20"},_e={class:"chart-card"},ve={class:"chart-title"},ge={__name:"IndustryVisualization",setup(ye){const h=P({industry:"Fintech"}),z=[{value:"Fintech",label:"金融科技 (Fintech)"},{value:"HealthTech",label:"健康科技 (HealthTech)"},{value:"EdTech",label:"教育科技 (EdTech)"},{value:"E-commerce",label:"电子商务 (E-commerce)"},{value:"Greentech",label:"绿色科技 (Greentech)"}],G=X(()=>{const e=z.find(t=>t.value===h.industry);return e?e.label:""}),p=P({marketSize:!1,topCompanies:!1,fastestGrowing:!1,trend:!1}),w=f("0"),k=f("0"),b=f([]),C=f({xAxis:[],series:[]}),F=f([]),S=f([]),A=f({xAxis:[],series:[]}),$=()=>{D()},D=async()=>{Object.keys(p).forEach(e=>{p[e]=!0});try{const e=h.industry,n=(await U.get(`http://127.0.0.1:8000/api/industry_summary_api/${e}`)).data;if(w.value=n.market_size||"未知",k.value=(Math.random()*20+5).toFixed(1),n.top_companies&&n.top_companies.length>0){const c=n.top_companies.map(r=>{let a=r.revenue;return typeof a=="string"&&(a.endsWith("M")||a.endsWith("m")?a=parseFloat(a.slice(0,-1)):a.endsWith("B")||a.endsWith("b")?a=parseFloat(a.slice(0,-1))*1e3:a=parseFloat(a)||0),{...r,revenue:a,displayRevenue:a}});c.sort((r,a)=>a.revenue-r.revenue),b.value=c;const d=c.map(r=>r.name),s=c.map(r=>r.revenue);C.value={yAxis:d,series:[{data:s,type:"bar"}],xAxis:{name:"收入(百万美元)"},legend:{show:!1}}}else I();n.fastest_growing&&n.fastest_growing.length>0?(F.value=n.fastest_growing,S.value=n.fastest_growing.map(c=>({name:c.name,value:M(c.founded)}))):R(),V()}catch(e){console.error("获取行业数据失败",e),Y.error("获取行业数据失败，使用模拟数据"),H()}finally{Object.keys(p).forEach(e=>{p[e]=!1})}},H=()=>{w.value=`${(Math.random()*500+100).toFixed(1)}亿美元`,k.value=(Math.random()*20+5).toFixed(1),I(),R(),V()},I=()=>{const e=[],n={Fintech:["Pay","Bank","Fin","Money","Cash"],HealthTech:["Health","Med","Care","Life","Bio"],EdTech:["Learn","Edu","Teach","School","Study"],"E-commerce":["Shop","Buy","Market","Store","Trade"],Greentech:["Eco","Green","Solar","Earth","Clean"]}[h.industry]||["Tech","Smart","AI","Digital","Future"];for(let s=0;s<5;s++){const r=n[s%n.length],a=Math.floor(Math.random()*1e4+1e3);e.push({name:`${r}${["Tech","Group","Solutions","Systems","Corp"][s%5]}`,revenue:a})}e.sort((s,r)=>r.revenue-s.revenue),b.value=e;const c=e.map(s=>s.name),d=e.map(s=>s.revenue);C.value={yAxis:c,series:[{data:d,type:"bar"}],xAxis:{name:"收入(百万美元)"},legend:{show:!1}}},R=()=>{const e=[],n={Fintech:["Quick","Rapid","Fast","Swift","Rocket"],HealthTech:["Vital","Pulse","Cure","Heal","Wellness"],EdTech:["Bright","Smart","Genius","Mind","Brain"],"E-commerce":["Click","Cart","Basket","Web","Online"],Greentech:["Leaf","Wind","Sun","Eco","Nature"]}[h.industry]||["Grow","Rise","Boost","Surge","Jump"],c=new Date().getFullYear();for(let d=0;d<5;d++){const s=n[d%n.length],r=c-Math.floor(Math.random()*10+1);e.push({name:`${s}${["Startup","Ventures","Innovation","Labs","AI"][d%5]}`,founded:r})}e.sort((d,s)=>s.founded-d.founded),F.value=e,S.value=e.map(d=>({name:d.name,value:M(d.founded)}))},V=()=>{const e=[],t=[],n=[],c=new Date().getFullYear();let s=Math.random()*100+50;for(let r=0;r<5;r++){const a=c-4+r;e.push(a.toString());const v=Math.random()*20+10;t.push(s.toFixed(1)),n.push(v.toFixed(1)),s=s*(1+v/100)}A.value={xAxis:e,series:[{name:"市场规模(十亿美元)",type:"bar",data:t},{name:"增长率(%)",type:"line",yAxisIndex:1,data:n}],yAxis:[{type:"value",name:"规模",position:"left"},{type:"value",name:"增长率(%)",position:"right"}]}},N=e=>!e&&e!==0?"0":`${e.toFixed(2)}百万美元`,O=e=>{const t=b.value.reduce((n,c)=>n+c.revenue,0);return t===0?"0":(e/t*100).toFixed(2)},M=e=>e?new Date().getFullYear()-e:0,j=()=>{se.confirm("确定要导出当前行业数据吗？","导出确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{Y.success("数据导出成功")}).catch(()=>{})};return Z(()=>{D()}),(e,t)=>{const n=m("el-option"),c=m("el-select"),d=m("el-form-item"),s=m("el-button"),r=m("el-form"),a=m("el-col"),v=m("el-row"),g=m("el-table-column"),L=m("el-table"),E=ee("loading");return y(),T("div",oe,[l("div",ne,[t[3]||(t[3]=l("h1",{class:"page-title"},"行业数据可视化",-1)),l("div",re,[o(r,{inline:!0,model:h,class:"filter-form"},{default:i(()=>[o(d,{label:"行业"},{default:i(()=>[o(c,{modelValue:h.industry,"onUpdate:modelValue":t[0]||(t[0]=u=>h.industry=u),placeholder:"选择行业",onChange:$,style:{width:"280px"},"popper-class":"industry-select-dropdown"},{default:i(()=>[(y(),T(te,null,ae(z,u=>o(n,{key:u.value,label:u.label,value:u.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(d,null,{default:i(()=>[o(s,{type:"primary",onClick:D},{default:i(()=>t[1]||(t[1]=[x("查询")])),_:1}),o(s,{type:"success",onClick:j},{default:i(()=>t[2]||(t[2]=[x("导出数据")])),_:1})]),_:1})]),_:1},8,["model"])])]),o(v,{gutter:20},{default:i(()=>[o(a,{span:24},{default:i(()=>[l("div",le,[l("div",ie,[l("h2",null,_(G.value)+"市场规模",1)]),B((y(),T("div",ce,[l("div",de,_(w.value),1),l("div",ue,"预计年增长率: "+_(k.value)+"%",1)])),[[E,p.marketSize]])])]),_:1})]),_:1}),o(v,{gutter:20,class:"mt-20"},{default:i(()=>[o(a,{xs:24,sm:24,md:12,lg:12,xl:12},{default:i(()=>[l("div",pe,[t[4]||(t[4]=l("h3",{class:"chart-title"},"顶级公司收入分布",-1)),o(q,{"chart-data":C.value,loading:p.topCompanies,height:"350px",title:"","show-title":!1,horizontal:!0},null,8,["chart-data","loading"])])]),_:1}),o(a,{xs:24,sm:24,md:12,lg:12,xl:12},{default:i(()=>[l("div",me,[t[5]||(t[5]=l("h3",{class:"chart-title"},"增长最快的公司",-1)),o(J,{"chart-data":S.value,loading:p.fastestGrowing,height:"350px",title:"","show-title":!1},null,8,["chart-data","loading"])])]),_:1})]),_:1}),l("div",he,[t[6]||(t[6]=l("h2",{class:"section-title"},"顶级公司详细数据",-1)),B((y(),W(L,{data:b.value,style:{width:"100%"},border:"",stripe:""},{default:i(()=>[o(g,{prop:"name",label:"公司名称",sortable:""}),o(g,{prop:"revenue",label:"收入",sortable:""},{default:i(u=>[x(_(N(u.row.revenue)),1)]),_:1}),o(g,{prop:"marketShare",label:"市场份额",sortable:""},{default:i(u=>[x(_(O(u.row.revenue))+"% ",1)]),_:1})]),_:1},8,["data"])),[[E,p.topCompanies]])]),l("div",fe,[t[7]||(t[7]=l("h2",{class:"section-title"},"增长最快的公司",-1)),B((y(),W(L,{data:F.value,style:{width:"100%"},border:"",stripe:""},{default:i(()=>[o(g,{prop:"name",label:"公司名称",sortable:""}),o(g,{prop:"founded",label:"成立年份",sortable:""}),o(g,{prop:"age",label:"公司年龄",sortable:""},{default:i(u=>[x(_(M(u.row.founded))+"年 ",1)]),_:1})]),_:1},8,["data"])),[[E,p.fastestGrowing]])]),o(v,{gutter:20,class:"mt-20"},{default:i(()=>[o(a,{span:24},{default:i(()=>[l("div",_e,[l("h3",ve,_(G.value)+"行业趋势",1),o(Q,{"chart-data":A.value,loading:p.trend,height:"400px",title:"","show-title":!1},null,8,["chart-data","loading"])])]),_:1})]),_:1})])}}},ke=K(ge,[["__scopeId","data-v-ae6137a4"]]);export{ke as default};
